<div class="page-container">
    <!-- Page Header -->
    <app-page-header [title]="isEditMode() ? 'Editar Cliente' : 'Agregar Nuevo Cliente'"
        [subtitle]="isEditMode() ? 'Actualizar información del cliente' : 'Crear un perfil para un nuevo atleta'"
        [backRoute]="'/clients'">
        <div headerActions>
            <app-button routerLink="/clients" variant="outline" class="desktop-only">
                Cancelar
            </app-button>
        </div>
    </app-page-header>

    <div class="page-content">
        <div class="form-card">
            <form [formGroup]="clientForm" (ngSubmit)="onSubmit()">
                <!-- Personal Information Section -->
                <section class="form-section">
                    <h2>Información Personal</h2>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="name">Nombre Completo *</label>
                            <input id="name" type="text" formControlName="name" placeholder="ej. Juan Pérez"
                                [class.error]="name?.invalid && name?.touched">
                            <div *ngIf="name?.invalid && name?.touched" class="error-text">
                                <span *ngIf="name?.errors?.['required']">El nombre es obligatorio</span>
                                <span *ngIf="name?.errors?.['minlength']">Mínimo 2 caracteres</span>
                                <span *ngIf="name?.errors?.['pattern']">El nombre no puede contener números</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="email">Correo Electrónico *</label>
                            <input id="email" type="email" formControlName="email" placeholder="ej. juan@ejemplo.com"
                                [class.error]="email?.invalid && email?.touched">
                            <div *ngIf="email?.invalid && email?.touched" class="error-text">
                                <span *ngIf="email?.errors?.['required']">El correo es obligatorio</span>
                                <span *ngIf="email?.errors?.['email'] || email?.errors?.['pattern']">Correo
                                    inválido</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="phone">Número de Teléfono</label>
                            <input id="phone" type="tel" formControlName="phone" placeholder="ej. +1 555 123 4567"
                                [class.error]="clientForm.get('phone')?.invalid && clientForm.get('phone')?.touched">
                            <span *ngIf="clientForm.get('phone')?.invalid && clientForm.get('phone')?.touched"
                                class="error-text">
                                Formato inválido (debe tener 8 dígitos)
                            </span>
                        </div>

                        <div class="form-group">
                            <label for="birthDate">Fecha de Nacimiento *</label>
                            <input id="birthDate" type="date" formControlName="birthDate"
                                [class.error]="birthDate?.invalid && birthDate?.touched">
                            <span *ngIf="birthDate?.invalid && birthDate?.touched" class="error-text">
                                La fecha de nacimiento es obligatoria
                            </span>
                        </div>
                    </div>
                </section>

                <div class="divider"></div>

                <!-- Physical Metrics Section -->
                <section class="form-section">
                    <h2>Métricas Físicas</h2>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="height">Altura (cm)</label>
                            <input id="height" type="number" formControlName="height" placeholder="ej. 175" min="50"
                                max="300"
                                [class.error]="clientForm.get('height')?.invalid && clientForm.get('height')?.touched">
                            <span *ngIf="clientForm.get('height')?.invalid && clientForm.get('height')?.touched"
                                class="error-text">
                                Altura debe estar entre 50 y 300 cm
                            </span>
                        </div>

                        <div class="form-group">
                            <label for="weight">Peso (kg)</label>
                            <input id="weight" type="number" formControlName="weight" placeholder="ej. 70" min="20"
                                max="500"
                                [class.error]="clientForm.get('weight')?.invalid && clientForm.get('weight')?.touched">
                            <span *ngIf="clientForm.get('weight')?.invalid && clientForm.get('weight')?.touched"
                                class="error-text">
                                Peso debe estar entre 20 y 500 kg
                            </span>
                        </div>
                    </div>
                </section>

                <div class="divider"></div>

                <!-- Goals & Notes Section -->
                <section class="form-section">
                    <h2>Objetivos y Notas</h2>

                    <div class="form-group full-width">
                        <label for="goal">Objetivo Principal</label>
                        <input id="goal" type="text" formControlName="goal"
                            placeholder="ej. Ganancia Muscular, Pérdida de Peso, Preparación Maratón">
                    </div>

                    <div class="form-group full-width">
                        <label for="notes">Notas Adicionales</label>
                        <textarea id="notes" formControlName="notes" rows="4"
                            placeholder="Lesiones, preferencias o requisitos específicos..."></textarea>
                    </div>
                </section>

                <div class="form-actions">
                    <app-button type="submit" variant="primary" size="large" [loading]="loading()"
                        [disabled]="clientForm.invalid">
                        {{ isEditMode() ? 'Guardar Cambios' : 'Crear Cliente' }}
                    </app-button>
                </div>
            </form>
        </div>
    </div>
</div>